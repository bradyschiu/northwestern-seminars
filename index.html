<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Northwestern Writing Seminar Analysis</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/tailwindcss/2.2.19/tailwind.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- React and Related Libraries -->
    <script src="https://unpkg.com/react@17/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@17/umd/react-dom.development.js"></script>
    
    <!-- PapaParse for CSV parsing -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.3.2/papaparse.min.js"></script>
    
    <!-- Recharts and its dependencies -->
    <script src="https://unpkg.com/prop-types/prop-types.min.js"></script>
    <script src="https://unpkg.com/recharts@2.1.9/umd/Recharts.js"></script>
    
    <!-- Babel for JSX transformation -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <style>
        /* Base styles */
        body {
            font-family: 'Inter', sans-serif;
        }
        
        /* Tab transitions */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .fade-in {
            animation: fadeIn 0.4s ease-in-out;
        }
        
        /* Custom scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }
        
        ::-webkit-scrollbar-track {
            background: #f1f1f1;
            border-radius: 10px;
        }
        
        ::-webkit-scrollbar-thumb {
            background: #d1d5db;
            border-radius: 10px;
        }
        
        ::-webkit-scrollbar-thumb:hover {
            background: #9ca3af;
        }
        
        /* Card hover effect */
        .course-card {
            transition: all 0.2s ease-in-out;
            border-width: 2px;
        }
        
        .course-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
        }
        
        /* Course cards with color variants */
        .course-card-1 { background-color: #e8f5e9; border-color: #4caf50; }
        .course-card-2 { background-color: #e3f2fd; border-color: #2196f3; }
        .course-card-3 { background-color: #fff8e1; border-color: #ffc107; }
        .course-card-4 { background-color: #f3e5f5; border-color: #9c27b0; }
        .course-card-5 { background-color: #e0f7fa; border-color: #00bcd4; }
        .course-card-6 { background-color: #fff3e0; border-color: #ff9800; }
        .course-card-7 { background-color: #e8eaf6; border-color: #3f51b5; }
        .course-card-8 { background-color: #ffebee; border-color: #f44336; }
        .course-card-9 { background-color: #f1f8e9; border-color: #8bc34a; }
        .course-card-10 { background-color: #fce4ec; border-color: #e91e63; }
        
        /* Term selector styling */
        .term-selector {
            background-color: #f0fdf4;
            border-radius: 9999px;
            padding: 0.5rem 1rem;
            font-weight: 500;
            font-size: 0.95rem;
            color: #166534;
            border: 1px solid #dcfce7;
            box-shadow: 0 1px 2px rgba(0, 0, 0, 0.05);
        }
        
        /* Tab transitions */
        .tab-content {
            transition: opacity 0.3s ease, transform 0.3s ease;
        }
        
        .tab-enter {
            opacity: 0;
            transform: translateY(10px);
        }
        
        .tab-enter-active {
            opacity: 1;
            transform: translateY(0);
            transition: opacity 0.3s ease, transform 0.3s ease;
        }
        
        /* Bar chart styling */
        .custom-bar {
            margin: 0 0 8px 0;
        }
    </style>
</head>
<body class="bg-gray-50">
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;
        // Access Recharts components
        const { 
            BarChart, Bar, XAxis, YAxis, CartesianGrid, Tooltip, Legend, 
            ResponsiveContainer, Cell
        } = window.Recharts;

        // Color palette for bars and cards
        const COLORS = [
            '#4caf50', '#2196f3', '#ffc107', '#9c27b0', 
            '#00bcd4', '#ff9800', '#3f51b5', '#f44336', 
            '#8bc34a', '#e91e63', '#607d8b'
        ];

        const App = () => {
            const [data, setData] = useState([]);
            const [loading, setLoading] = useState(true);
            const [currentTab, setCurrentTab] = useState('rankings');
            const [sortField, setSortField] = useState('Mean Overall Rating of Course');
            const [filterSeminarsOnly, setFilterSeminarsOnly] = useState(true); // Default to true
            const [searchTerm, setSearchTerm] = useState('');
            const [currentTerm, setCurrentTerm] = useState('Spring 2025');
            const [availableTerms, setAvailableTerms] = useState(['Spring 2025']);
            const [wishlist, setWishlist] = useState(() => {
                const savedWishlist = localStorage.getItem('seminarWishlist');
                return savedWishlist ? JSON.parse(savedWishlist) : [];
            });
            const [hoveredCourse, setHoveredCourse] = useState(null);
            const [tabAnimation, setTabAnimation] = useState(false);

            // Metrics to display in bar charts
            const metrics = [
                { key: 'Mean Overall Rating of Course', label: 'Course Rating' },
                { key: 'Mean Overall Rating of Instruction', label: 'Instruction Rating' },
                { key: 'Mean How Much Learned', label: 'How Much Learned' },
                { key: 'Mean Effectiveness of Intellectual Challenge', label: 'Intellectual Challenge' },
                { key: 'Mean Effectiveness of Stimulating Interest', label: 'Stimulating Interest' },
                { key: 'Mean Average Hours Spent Per Week', label: 'Hours Spent Per Week', reverse: true },
                { key: 'roberta_pos', label: 'Positive Review Sentiment' }
            ];

            // For sorting hours in reverse (lowest at top)
            const sortFunctions = {
                'Mean Average Hours Spent Per Week': (a, b) => a[sortField] - b[sortField],
                default: (a, b) => b[sortField] - a[sortField]
            };

            // Handle tab switching with animation
            const handleTabChange = (tab) => {
                setTabAnimation(true);
                setTimeout(() => {
                    setCurrentTab(tab);
                    setTabAnimation(false);
                }, 300);
            };

            useEffect(() => {
                // Save wishlist to localStorage whenever it changes
                localStorage.setItem('seminarWishlist', JSON.stringify(wishlist));
            }, [wishlist]);

            const loadData = async () => {
                try {
                    const csvUrl = 'https://raw.githubusercontent.com/poweringimaginations/northwestern-seminars/main/Spring%20Seminars%20Data%20%20Sheet1.csv';
                    const response = await fetch(csvUrl);
                    const csvData = await response.text();
                    
                    Papa.parse(csvData, {
                        header: true,
                        dynamicTyping: true,
                        skipEmptyLines: true,
                        complete: (results) => {
                            // Process the data
                            const processedData = results.data.map((item, index) => ({
                                ...item,
                                // Convert TRUE/FALSE strings to actual booleans if needed
                                'Prev Was Seminar?': typeof item['Prev Was Seminar?'] === 'string' 
                                    ? item['Prev Was Seminar?'].toLowerCase() === 'true' 
                                    : item['Prev Was Seminar?'],
                                courseLabel: `${item['Current Taught Course'].substring(0, 25)}${item['Current Taught Course'].length > 25 ? '...' : ''}`,
                                fullLabel: `${item['Current Taught Course']} (${item['Instructor Name']})`,
                                dataSource: item['Previous Taught Course'] || 'No previous data',
                                // Assign a color based on index
                                colorIndex: index % COLORS.length,
                                color: COLORS[index % COLORS.length]
                            }));
                            setData(processedData);
                            setLoading(false);
                        },
                        error: (error) => {
                            console.error('Error parsing CSV:', error);
                            setLoading(false);
                        }
                    });
                } catch (error) {
                    console.error('Error loading data:', error);
                    setLoading(false);
                }
            };
            useEffect(() => {
                loadData();
            }, [currentTerm]);

            const filteredData = data
                .filter(item => 
                    (filterSeminarsOnly ? item['Prev Was Seminar?'] === true : true) &&
                    (searchTerm ? 
                        item['Instructor Name']?.toLowerCase().includes(searchTerm.toLowerCase()) || 
                        item['Current Taught Course']?.toLowerCase().includes(searchTerm.toLowerCase())
                        : true
                    )
                );

            const sortedData = [...filteredData].sort(
                sortField === 'Mean Average Hours Spent Per Week' 
                    ? sortFunctions['Mean Average Hours Spent Per Week'] 
                    : sortFunctions.default
            );

            const addToWishlist = (course) => {
                if (!wishlist.some(item => item['Current Taught Course'] === course['Current Taught Course'])) {
                    setWishlist([...wishlist, course]);
                }
            };

            const removeFromWishlist = (course) => {
                setWishlist(wishlist.filter(item => 
                    item['Current Taught Course'] !== course['Current Taught Course']
                ));
            };

            const isInWishlist = (course) => {
                return wishlist.some(item => item['Current Taught Course'] === course['Current Taught Course']);
            };

            // Helper component for metric bar charts with more spacing
            const MetricBarChart = ({ data, metric, height = 300, barSize = 20, barGap = 8 }) => {
                const sortedData = [...data].sort((a, b) => 
                    metric.reverse 
                        ? a[metric.key] - b[metric.key]
                        : b[metric.key] - a[metric.key]
                );
                
                const limitedData = sortedData.slice(0, 10);
                
                return (
                    <div className="h-full">
                        <ResponsiveContainer width="100%" height={height}>
                            <BarChart
                                data={limitedData}
                                layout="vertical"
                                margin={{ top: 5, right: 30, left: 150, bottom: 5 }}
                                barCategoryGap={barGap}
                                barSize={barSize}
                                className="custom-bar"
                            >
                                <CartesianGrid strokeDasharray="3 3" />
                                <XAxis 
                                    type="number" 
                                    domain={metric.key === 'Mean Average Hours Spent Per Week' ? [0, 8] : [0, 7]} 
                                />
                                <YAxis 
                                    dataKey="courseLabel" 
                                    type="category" 
                                    width={150} 
                                    tick={{ fontSize: 13 }}
                                    tickMargin={5}
                                />
                                <Tooltip 
                                    formatter={(value, name) => [value.toFixed(2), metric.label]}
                                    labelFormatter={(label) => {
                                        const course = data.find(c => c.courseLabel === label);
                                        return `${course['Current Taught Course']} - ${course['Instructor Name']}`;
                                    }}
                                    contentStyle={{ fontFamily: 'Inter, sans-serif' }}
                                />
                                <Bar 
                                    dataKey={metric.key} 
                                    className="custom-bar"
                                    name={metric.label}
                                >
                                    {limitedData.map((entry, index) => (
                                        <Cell key={`cell-${index}`} fill={entry.color || COLORS[index % COLORS.length]} />
                                    ))}
                                </Bar>
                            </BarChart>
                        </ResponsiveContainer>
                    </div>
                );
            };

            // Helper for data source note
            const DataSourceNote = () => (
                <div className="bg-blue-50 border-l-4 border-blue-500 p-4 mb-6">
                    <div className="flex">
                        <div className="flex-shrink-0">
                            <svg className="h-5 w-5 text-blue-500" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor">
                                <path fillRule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clipRule="evenodd" />
                            </svg>
                        </div>
                        <div className="ml-3">
                            <p className="text-sm text-blue-700">
                                The ratings shown are based on historical data from <strong>Previous Taught Courses</strong>, not necessarily the current course.
                            </p>
                        </div>
                    </div>
                </div>
            );

            // Term selector styled like the example
            const TermSelector = () => (
                <div className="flex justify-center my-4">
                    <div className="term-selector">
                        {currentTerm}
                    </div>
                </div>
            );

            if (loading) {
                return (
                    <div className="flex items-center justify-center h-screen">
                        <div className="flex flex-col items-center">
                            <div className="animate-spin rounded-full h-12 w-12 border-b-2 border-green-600 mb-4"></div>
                            <div className="text-xl font-semibold text-gray-700">Loading seminar data...</div>
                        </div>
                    </div>
                );
            }
            
            return (
                <div className="min-h-screen bg-gray-50">
                    <header className="bg-white border-b border-gray-200 py-4 px-4 shadow-sm">
                        <div className="container mx-auto">
                            <div className="flex flex-col items-center">
                                <div className="flex items-center">
                                    <svg xmlns="http://www.w3.org/2000/svg" className="h-8 w-8 mr-2 text-green-600" viewBox="0 0 20 20" fill="currentColor">
                                        <path d="M10.394 2.08a1 1 0 00-.788 0l-7 3a1 1 0 000 1.84L5.25 8.051a.999.999 0 01.356-.257l4-1.714a1 1 0 11.788 1.838L7.667 9.088l1.94.831a1 1 0 00.787 0l7-3a1 1 0 000-1.838l-7-3zM3.31 9.397L5 10.12v4.102a8.969 8.969 0 00-1.05-.174 1 1 0 01-.89-.89 11.115 11.115 0 01.25-3.762zM9.3 16.573A9.026 9.026 0 007 14.935v-3.957l1.818.78a3 3 0 002.364 0l5.508-2.361a11.026 11.026 0 01.25 3.762 1 1 0 01-.89.89 8.968 8.968 0 00-5.35 2.524 1 1 0 01-1.4 0zM6 18a1 1 0 001-1v-2.065a8.935 8.935 0 00-2-.712V17a1 1 0 001 1z" />
                                    </svg>
                                    <h1 className="text-2xl font-bold text-gray-800">Northwestern Writing Seminar Analysis</h1>
                                </div>
                                <p className="mt-1 text-gray-600 text-center">Find the perfect writing seminar based on past course ratings and reviews</p>
                                <TermSelector />
                            </div>
                        </div>
                    </header>

                    <nav className="bg-white shadow-sm border-b">
                        <div className="container mx-auto flex justify-center">
                            <button 
                                className={`px-6 py-4 font-medium transition-colors duration-200 ease-in-out ${currentTab === 'rankings' ? 'text-green-600 border-b-2 border-green-500' : 'text-gray-600 hover:text-green-500'}`}
                                onClick={() => handleTabChange('rankings')}
                            >
                                Seminar Rankings
                            </button>
                            <button 
                                className={`px-6 py-4 font-medium transition-colors duration-200 ease-in-out ${currentTab === 'wishlist' ? 'text-green-600 border-b-2 border-green-500' : 'text-gray-600 hover:text-green-500'}`}
                                onClick={() => handleTabChange('wishlist')}
                            >
                                My Wishlist ({wishlist.length})
                            </button>
                        </div>
                    </nav>

                    <div className={`container mx-auto py-6 px-4 ${tabAnimation ? 'tab-enter' : 'tab-content'}`}>
                        {currentTab === 'rankings' && (
                            <div className="fade-in">
                                <DataSourceNote />
                                
                                <div className="bg-white p-6 rounded-lg shadow-sm mb-6">
                                    <div className="flex flex-wrap items-center mb-4">
                                        <div className="w-full md:w-1/2 mb-4 md:mb-0">
                                            <label className="block mb-2 text-sm font-medium text-gray-700">Sort by:</label>
                                            <select 
                                                value={sortField} 
                                                onChange={(e) => setSortField(e.target.value)}
                                                className="w-full p-2 border border-gray-300 rounded-md focus:ring-green-500 focus:border-green-500"
                                            >
                                                {metrics.map(metric => (
                                                    <option key={metric.key} value={metric.key}>
                                                        {metric.label}
                                                    </option>
                                                ))}
                                            </select>
                                        </div>
                                        <div className="w-full md:w-1/2 pl-0 md:pl-4">
                                            <label className="block mb-2 text-sm font-medium text-gray-700">Search by instructor or course name:</label>
                                            <input 
                                                type="text" 
                                                value={searchTerm}
                                                onChange={(e) => setSearchTerm(e.target.value)}
                                                placeholder="Type to search..."
                                                className="w-full p-2 border border-gray-300 rounded-md focus:ring-green-500 focus:border-green-500"
                                            />
                                            <div className="mt-2">
                                                <input 
                                                    type="checkbox" 
                                                    id="seminarsOnly" 
                                                    checked={filterSeminarsOnly} 
                                                    onChange={() => setFilterSeminarsOnly(!filterSeminarsOnly)}
                                                    className="mr-2"
                                                />
                                                <label htmlFor="seminarsOnly" className="text-sm text-gray-700">
                                                    Show only previous seminars
                                                </label>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                {/* Featured Chart with more spacing */}
                                <div className="bg-white rounded-lg shadow-sm mb-6 p-6">
                                    <h2 className="text-xl font-semibold text-gray-800 mb-4">
                                        {sortField === 'Mean Average Hours Spent Per Week' 
                                            ? 'Seminars with Lowest Hours Required'
                                            : `Top Seminars by ${metrics.find(m => m.key === sortField)?.label || sortField}`
                                        }
                                    </h2>
                                    <div className="h-96"> {/* Increased height for better spacing */}
                                        <MetricBarChart 
                                            data={sortedData} 
                                            metric={metrics.find(m => m.key === sortField) || metrics[0]}
                                            barSize={24}
                                            barGap={12}
                                        />
                                    </div>
                                    <div className="flex flex-wrap justify-center mt-6">
                                        {COLORS.slice(0, Math.min(sortedData.length, 10)).map((color, index) => {
                                            const course = sortedData[index];
                                            if (!course) return null;
                                            return (
                                                <div key={index} className="flex items-center mr-4 mb-2">
                                                    <div className="w-4 h-4 rounded-full" style={{backgroundColor: color}}></div>
                                                    <span className="ml-2 text-sm truncate max-w-xs">{course.courseLabel}</span>
                                                </div>
                                            );
                                        })}
                                    </div>
                                </div>

                                {/* Seminar Rankings Table */}
                                <div className="bg-white rounded-lg shadow-sm overflow-hidden">
                                    <div className="p-4 border-b border-gray-200">
                                        <h2 className="text-xl font-semibold text-gray-800">
                                            {sortField === 'Mean Average Hours Spent Per Week' 
                                                ? 'Seminars Ranked by Lowest Hours Required' 
                                                : sortField === 'roberta_pos'
                                                    ? 'Seminars Ranked by Positive Review Sentiment'
                                                    : `Seminars Ranked by ${sortField.replace('Mean ', '')}`
                                            }
                                        </h2>
                                    </div>
                                    <div className="overflow-x-auto">
                                        <table className="min-w-full divide-y divide-gray-200">
                                            <thead className="bg-gray-50">
                                                <tr>
                                                    <th scope="col" className="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                                                        Course
                                                    </th>
                                                    <th scope="col" className="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                                                        Instructor
                                                    </th>
                                                    <th scope="col" className="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                                                        Course Rating
                                                    </th>
                                                    <th scope="col" className="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                                                        Instruction Rating
                                                    </th>
                                                    <th scope="col" className="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                                                        Hours/Week
                                                    </th>
                                                    <th scope="col" className="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                                                        Sentiment
                                                    </th>
                                                    <th scope="col" className="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                                                        Is Seminar
                                                    </th>
                                                    <th scope="col" className="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                                                        Data Source
                                                    </th>
                                                    <th scope="col" className="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                                                        Wishlist
                                                    </th>
                                                </tr>
                                            </thead>
                                            <tbody className="bg-white divide-y divide-gray-200">
                                                {sortedData.map((course, index) => (
                                                    <tr key={index} className={index % 2 === 0 ? 'bg-white hover:bg-gray-50' : 'bg-gray-50 hover:bg-gray-100'}>
                                                        <td className="px-6 py-4 whitespace-normal text-sm font-medium text-gray-900" style={{borderLeft: `4px solid ${course.color || COLORS[index % COLORS.length]}`}}>
                                                            {course['Current Taught Course']}
                                                        </td>
                                                        <td className="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                                                            {course['Instructor Name']}
                                                        </td>
                                                        <td className="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                                                            {course['Mean Overall Rating of Course']?.toFixed(2)}
                                                        </td>
                                                        <td className="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                                                            {course['Mean Overall Rating of Instruction']?.toFixed(2)}
                                                        </td>
                                                        <td className="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                                                            {course['Mean Average Hours Spent Per Week']?.toFixed(2)}
                                                        </td>
                                                        <td className="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                                                            {course['roberta_pos']?.toFixed(2)}
                                                        </td>
                                                        <td className="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                                                            <span className={course['Prev Was Seminar?'] ? 'text-green-600' : 'text-gray-500'}>
                                                                {course['Prev Was Seminar?'] ? '✓' : '✗'}
                                                            </span>
                                                        </td>
                                                        <td className="px-6 py-4 whitespace-normal text-xs text-gray-500">
                                                            {course['Previous Taught Course'] || 'No previous data'}
                                                        </td>
                                                        <td className="px-6 py-4 whitespace-nowrap text-sm text-center">
                                                            {isInWishlist(course) ? (
                                                                <button 
                                                                    onClick={() => removeFromWishlist(course)}
                                                                    className="p-1 rounded bg-green-100 text-green-700 hover:bg-green-200 focus:outline-none transition-colors"
                                                                >
                                                                    ❤️
                                                                </button>
                                                            ) : (
                                                                <button 
                                                                    onClick={() => addToWishlist(course)}
                                                                    className="p-1 rounded bg-gray-100 text-gray-500 hover:bg-green-100 hover:text-green-700 focus:outline-none transition-colors"
                                                                >
                                                                    ♡
                                                                </button>
                                                            )}
                                                        </td>
                                                    </tr>
                                                ))}
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        )}
                        {currentTab === 'wishlist' && (
                            <div className="fade-in">
                                <DataSourceNote />
                                
                                <div className="bg-white p-6 rounded-lg shadow-sm mb-6">
                                    <h2 className="text-xl font-semibold text-gray-800 mb-4">My Wishlist</h2>
                                    
                                    {wishlist.length === 0 ? (
                                        <div className="text-center py-12 text-gray-500">
                                            <svg xmlns="http://www.w3.org/2000/svg" className="h-16 w-16 mx-auto mb-4 text-gray-300" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z" />
                                            </svg>
                                            <p className="mb-4 text-lg">Your wishlist is empty</p>
                                            <p className="mb-6">Add seminars to your wishlist by clicking the ♡ icon in the seminar listings</p>
                                            <button 
                                                onClick={() => handleTabChange('rankings')}
                                                className="px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 transition-colors"
                                            >
                                                Browse Seminars
                                            </button>
                                        </div>
                                    ) : (
                                        <div>
                                            <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mb-8">
                                                {wishlist.map((course, index) => (
                                                    <div 
                                                        key={index} 
                                                        className={`course-card course-card-${(index % 10) + 1} rounded-lg p-4 relative hover:shadow-md`}
                                                        onMouseEnter={() => setHoveredCourse(course)}
                                                        onMouseLeave={() => setHoveredCourse(null)}
                                                    >
                                                        <button 
                                                            onClick={() => removeFromWishlist(course)}
                                                            className="absolute top-2 right-2 p-1 rounded text-gray-700 hover:bg-gray-200 focus:outline-none"
                                                        >
                                                            <svg xmlns="http://www.w3.org/2000/svg" className="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
                                                                <path fillRule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z" clipRule="evenodd" />
                                                            </svg>
                                                        </button>
                                                        <h3 className="font-medium text-lg mb-1 pr-6 text-gray-900">{course['Current Taught Course']}</h3>
                                                        <p className="text-gray-600 mb-2">{course['Instructor Name']}</p>
                                                        <p className="text-xs text-gray-500">Based on: {course['Previous Taught Course'] || 'No previous data'}</p>
                                                        
                                                        {hoveredCourse && hoveredCourse['Current Taught Course'] === course['Current Taught Course'] && (
                                                            <div className="mt-3 pt-3 border-t border-gray-200">
                                                                <div className="grid grid-cols-2 gap-2 text-sm">
                                                                    <div className="text-gray-600">Course Rating:</div>
                                                                    <div className="font-medium">{course['Mean Overall Rating of Course']?.toFixed(2)}</div>
                                                                    
                                                                    <div className="text-gray-600">Instruction:</div>
                                                                    <div className="font-medium">{course['Mean Overall Rating of Instruction']?.toFixed(2)}</div>
                                                                    
                                                                    <div className="text-gray-600">Hours/Week:</div>
                                                                    <div className="font-medium">{course['Mean Average Hours Spent Per Week']?.toFixed(2)}</div>
                                                                    
                                                                    <div className="text-gray-600">How Much Learned:</div>
                                                                    <div className="font-medium">{course['Mean How Much Learned']?.toFixed(2)}</div>
                                                                    
                                                                    <div className="text-gray-600">Intellectual Challenge:</div>
                                                                    <div className="font-medium">{course['Mean Effectiveness of Intellectual Challenge']?.toFixed(2)}</div>
                                                                    
                                                                    <div className="text-gray-600">Stimulating Interest:</div>
                                                                    <div className="font-medium">{course['Mean Effectiveness of Stimulating Interest']?.toFixed(2)}</div>
                                                                    
                                                                    <div className="text-gray-600">Sentiment Score:</div>
                                                                    <div className="font-medium">{course['roberta_pos']?.toFixed(2)}</div>
                                                                    
                                                                    <div className="text-gray-600">Previously a Seminar:</div>
                                                                    <div className="font-medium">{course['Prev Was Seminar?'] ? 'Yes' : 'No'}</div>
                                                                </div>
                                                            </div>
                                                        )}
                                                        {!hoveredCourse || hoveredCourse['Current Taught Course'] !== course['Current Taught Course'] ? (
                                                            <div className="mt-2 text-gray-600 text-sm italic">Hover for details</div>
                                                        ) : null}
                                                    </div>
                                                ))}
                                            </div>
                                            
                                            {/* Wishlist Charts */}
                                            <h3 className="text-xl font-semibold text-gray-800 mb-4">Wishlist Comparisons</h3>
                                            
                                            <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
                                                {metrics.map((metric) => (
                                                    <div key={metric.key} className="bg-white p-5 rounded-lg shadow-sm">
                                                        <h4 className="text-lg font-medium mb-3 text-gray-700">
                                                            {metric.label}
                                                        </h4>
                                                        <div className="h-64">
                                                            <MetricBarChart 
                                                                data={wishlist} 
                                                                metric={metric}
                                                                height={250}
                                                                barSize={20}
                                                                barGap={10}
                                                            />
                                                        </div>
                                                    </div>
                                                ))}
                                            </div>
                                        </div>
                                    )}
                                </div>
                            </div>
                        )}
                    </div>

                    <footer className="bg-gray-800 text-white py-6 mt-12">
                        <div className="container mx-auto px-4">
                            <p className="text-center">Northwestern Writing Seminar Analysis Tool | Created to help students make informed choices</p>
                            <p className="text-center mt-2 text-gray-400 text-sm">Data collected from past CTECs for writing seminars</p>
                        </div>
                    </footer>
                </div>
            );
        };

        ReactDOM.render(<App />, document.getElementById('root'));
    </script>
</body>
</html>
